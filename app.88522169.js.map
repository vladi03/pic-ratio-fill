{"version":3,"sources":["webpack:///./src/pic-ratio-fill/picRatioFill/imgCalc.js","webpack:///./src/pic-ratio-fill/picRatioFill/PicRatioFill.js","webpack:///./src/pic-ratio-fill/index.js","webpack:///./src/index.js"],"names":["calcImage","img","containerWidth","containerHeight","a","imageWidth","naturalWidth","imageHeight","naturalHeight","willFitWidth","calcWillFitWidth","getMaxColor","colorRgb","colorRgbOpposite","imageTarget","doOpposite","Promise","resolve","reject","crossOrigin","canvasTwo","document","createElement","width","height","top","left","getContext","drawImage","newImg","toDataURL","objImg","src","colorThief","ColorThief","calcColors","color","getColor","complete","addEventListener","PicRatioFill","style","classes","useStyle","useState","colorCalc","setColorCalc","colorRgbValue","colorRgbOppositeValue","className","imageContainerWidthFit","imageContainerHeightFit","picBorderWidth","picBorderHeight","backgroundColor","fitWidth","fitHeight","onLoad","event","target","then","result","console","log","makeStyles","props","zIndex","overflow","display","marginLeft","marginRight","position","transform","PicRatioExample","margin","marginBottom","render","querySelector"],"mappings":"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","file":"app.88522169.js","sourcesContent":["import ColorThief from \"colorthief\";\n\nexport const calcImage = async (img, containerWidth, containerHeight) => {\n    const imageWidth = img.naturalWidth;\n    const imageHeight = img.naturalHeight;\n    const willFitWidth = calcWillFitWidth(containerWidth, containerHeight,\n        imageWidth, imageHeight);\n\n    const colorRgb = await getMaxColor(img, willFitWidth);\n    const colorRgbOpposite = await getMaxColor(img, willFitWidth, true);\n\n    return {willFitWidth, colorRgb, colorRgbOpposite};\n};\n\nexport const calcWillFitWidth = (containerWidth, containerHeight, imageWidth, imageHeight) => {\n    return (containerWidth / imageWidth) <= (containerHeight / imageHeight);\n};\n\nexport const getMaxColor = (imageTarget, willFitWidth, doOpposite = false) => {\n    return new Promise((resolve, reject) => {\n        const sliverSize = 15;\n        const img = imageTarget;\n        img.crossOrigin = \"Anonymous\";\n        const canvasTwo = document.createElement('canvas');\n        canvasTwo.width = willFitWidth ? img.naturalWidth : sliverSize;\n        canvasTwo.height = willFitWidth ? sliverSize : img.naturalHeight;\n\n        //fitWidth and is Opposite (bottom)\n        let top = img.naturalHeight - sliverSize;\n        let left = 0;\n        //fit Height and is Opposite\n        if(!willFitWidth && doOpposite) {\n            top = 0;\n            left = img.naturalWidth - sliverSize;\n        } //fit width and not opposite\n        else if(!doOpposite) {\n            top = 0;\n            left = 0\n        }\n\n        canvasTwo.getContext('2d').drawImage(\n            img, left, top, canvasTwo.width, canvasTwo.height,\n            0, 0, canvasTwo.width, canvasTwo.height);\n\n        const newImg = canvasTwo.toDataURL();\n\n        //const fac = new FastAverageColor();\n        const objImg = document.createElement('img');\n        objImg.src = newImg;\n        const colorThief = new ColorThief();\n\n        const calcColors = () => {\n            const color = colorThief.getColor(objImg);\n            resolve(color);\n        };\n\n        if(objImg.complete) {\n            calcColors();\n        } else {\n            objImg.addEventListener(\"load\", ()=> {\n                calcColors();\n            })\n        }\n    });\n};\n","import React, {useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {calcImage} from \"./imgCalc\";\n\nexport const PicRatioFill = ({src, width, height, style}) => {\n\n    const classes = useStyle({\n        containerWidth: width,\n        containerHeight: height\n    });\n\n    const [colorCalc, setColorCalc] = useState({\n        willFitWidth: true,\n        colorRgb: [0,0,0],\n        colorRgbOpposite:[0,0,0]\n    });\n    const {willFitWidth, colorRgb, colorRgbOpposite} = colorCalc;\n\n    const colorRgbValue = `rgb(${colorRgb[0]},${colorRgb[1]}, ${colorRgb[2]})`;\n    const colorRgbOppositeValue = `rgb(${colorRgbOpposite[0]},${colorRgbOpposite[1]}, ${colorRgbOpposite[2]})`;\n\n    return (\n        <div\n            style={style}\n            className={willFitWidth ?\n                classes.imageContainerWidthFit :\n                classes.imageContainerHeightFit\n                }\n        >\n            <div\n                className={willFitWidth ? classes.picBorderWidth : classes.picBorderHeight}\n                style={{backgroundColor: colorRgbValue}}\n            />\n\n            <div\n                className={willFitWidth ? classes.fitWidth : classes.fitHeight}\n            >\n            <img\n                src={src}\n                className={willFitWidth ? classes.fitWidth : classes.fitHeight}\n                onLoad={(event) => {\n                    calcImage(event.target, width, height).then(\n                        (result) => {\n                            console.log(result);\n                            setColorCalc(result);\n                        }\n                    );\n                }}\n            />\n            </div>\n\n            <div\n                className={willFitWidth ? classes.picBorderWidth : classes.picBorderHeight}\n                style={{backgroundColor: colorRgbOppositeValue}}\n            />\n        </div>\n    )\n};\n\nconst useStyle = makeStyles({\n    picBorderHeight: {\n        width: \"50%\",\n        height: props => props.containerHeight,\n        zIndex: 1,\n    },\n    picBorderWidth: {\n        width: \"100%\",\n        height: \"50%\",\n        zIndex: 1,\n    },\n    imageContainerHeightFit : {\n        width: props => props.containerWidth,\n        height: props => props.containerHeight,\n        overflow: \"hidden\",\n        backgroundColor: \"#afcdee\",\n        display:\"flex\"\n    },\n    imageContainerWidthFit : {\n        width: props => props.containerWidth,\n        height: props => props.containerHeight,\n        overflow: \"hidden\",\n        backgroundColor: \"#afcdee\"\n    },\n    fitHeight: {\n        height: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        position: \"relative\",\n        zIndex: 2\n    },\n    fitWidth: {\n        width: \"inherit\",\n        position: \"absolute\",\n        transform: \"translateY(-50%)\",\n        zIndex: 2\n    }\n});","import React from \"react\";\nimport {PicRatioFill} from \"./picRatioFill/PicRatioFill\";\n\nexport const PicRatioExample = ()=> {\n\n    return (\n        <div style={{margin: 30}}>\n            <h1>Pic Ratio Fill</h1>\n            <p>Example : Fit to width</p>\n            <PicRatioFill\n                src=\"sample.jpg\"\n                width={330}\n                height={260}\n                style={{marginBottom: 20}}\n            />\n            <p>Example : Fit to Height</p>\n            <PicRatioFill\n                src=\"sample2.jpg\"\n                width={330}\n                height={260}\n            />\n\n        </div>\n    )\n};","import './index.css'\nimport React from 'react'\nimport {render} from 'react-dom'\nimport {PicRatioExample} from \"./pic-ratio-fill\";\n\nrender(<PicRatioExample />, document.querySelector('#app'));\n\n"],"sourceRoot":""}