{"version":3,"sources":["webpack:///./src/pic-ratio-fill/picRatioFill/imgCalc.js","webpack:///./src/pic-ratio-fill/picRatioFill/ColorPicker.js","webpack:///./src/pic-ratio-fill/picRatioFill/PicRatioFill.js","webpack:///./src/pic-ratio-fill/index.js","webpack:///./src/index.js"],"names":["calcWillFitWidth","containerWidth","containerHeight","imageWidth","imageHeight","getMaxColor","imageTarget","willFitWidth","doOpposite","Promise","resolve","reject","img","crossOrigin","canvasTwo","document","createElement","width","naturalWidth","height","naturalHeight","top","left","getContext","drawImage","newImg","toDataURL","objImg","src","colorThief","ColorThief","calcColors","color","getColor","pallet","getPalette","main","complete","addEventListener","ColorPicker","activeColor","onColorChange","onClose","colors","rgbToHex","forEach","hexColor","indexOf","push","style","float","marginTop","marginRight","cursor","onClick","r","g","b","onChangeComplete","rgb","presetColors","componentToHex","c","hex","toString","length","rgbArray","PicRatioFill","onChangeColors","classes","useStyle","useState","selectedFill","setSelectedFill","colorRgb","colorRgbOpposite","colorCalc","setColorCalc","colorRgbValue","colorRgbOppositeValue","className","editContainer","imageContainerWidthFit","imageContainerHeightFit","picBorderWidth","picBorderHeight","backgroundColor","fitWidth","fitHeight","onLoad","event","target","all","then","results","catch","result","console","log","pickerContainer","newColor","newCalc","makeStyles","props","zIndex","overflow","display","marginLeft","position","transform","PicRatioExample","onChange","margin","marginBottom","render","querySelector"],"mappings":"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","file":"app.eebe0493.js","sourcesContent":["import ColorThief from \"colorthief\";\n\nexport const calcImage = (img, containerWidth, containerHeight) => {\n    return new Promise((resolve, reject)=> {\n        const imageWidth = img.naturalWidth;\n        const imageHeight = img.naturalHeight;\n        const willFitWidth = calcWillFitWidth(containerWidth, containerHeight,\n            imageWidth, imageHeight);\n\n        const colorRgb = getMaxColor(img, willFitWidth);\n        const colorRgbOpposite = getMaxColor(img, willFitWidth, true);\n\n        Promise.all([colorRgb, colorRgbOpposite])\n            .then(results => {\n                resolve({willFitWidth,\n                    colorRgb: results[0],\n                    colorRgbOpposite: results[1]\n                });\n            }).catch(reject);\n    });\n};\n\nexport const calcWillFitWidth = (containerWidth, containerHeight, imageWidth, imageHeight) => {\n    return (containerWidth / imageWidth) <= (containerHeight / imageHeight);\n};\n\nexport const getMaxColor = (imageTarget, willFitWidth, doOpposite = false) => {\n    // noinspection JSUnusedLocalSymbols\n    return new Promise((resolve, reject) => {\n        const sliverSize = 15;\n        const img = imageTarget;\n        img.crossOrigin = \"Anonymous\";\n        const canvasTwo = document.createElement('canvas');\n        canvasTwo.width = willFitWidth ? img.naturalWidth : sliverSize;\n        canvasTwo.height = willFitWidth ? sliverSize : img.naturalHeight;\n\n        //fitWidth and is Opposite (bottom)\n        let top = img.naturalHeight - sliverSize;\n        let left = 0;\n        //fit Height and is Opposite\n        if(!willFitWidth && doOpposite) {\n            top = 0;\n            left = img.naturalWidth - sliverSize;\n        } //fit width and not opposite\n        else if(!doOpposite) {\n            top = 0;\n            left = 0\n        }\n\n        canvasTwo.getContext('2d').drawImage(\n            img, left, top, canvasTwo.width, canvasTwo.height,\n            0, 0, canvasTwo.width, canvasTwo.height);\n\n        const newImg = canvasTwo.toDataURL();\n\n        //const fac = new FastAverageColor();\n        const objImg = document.createElement('img');\n        objImg.src = newImg;\n        const colorThief = new ColorThief();\n\n        const calcColors = () => {\n            const color = colorThief.getColor(objImg);\n            const pallet = colorThief.getPalette(objImg, 7);\n            resolve({color, pallet, main: color});\n        };\n\n        if(objImg.complete) {\n            calcColors();\n        } else {\n            objImg.addEventListener(\"load\", ()=> {\n                calcColors();\n            })\n        }\n    });\n};\n","import React, {Fragment} from 'react'\nimport { SketchPicker } from 'react-color'\n\nexport const ColorPicker = ({activeColor, main, pallet, onColorChange, onClose}) => {\n\n    const colors = [rgbToHex(main)];\n    pallet.forEach((color) => {\n        const hexColor = rgbToHex(color);\n        if(colors.indexOf(hexColor)=== -1)\n            colors.push(hexColor)\n    });\n\n    return (\n        <Fragment>\n            {onClose &&\n            <span style={{float:\"right\", marginTop: -20, marginRight: 5, cursor: \"pointer\"}}\n\n               onClick={()=> onClose()}>Close</span>}\n        <SketchPicker\n            color={{r: activeColor[0], g: activeColor[1], b: activeColor[2]}}\n            onChangeComplete={(color) => {\n                onColorChange([color.rgb.r, color.rgb.g, color.rgb.b]);\n            }}\n            presetColors ={colors}\n        />\n        </Fragment>\n    );\n};\n\nfunction componentToHex(c) {\n    const hex = c.toString(16);\n    return hex.length === 1 ? \"0\" + hex : hex;\n}\n\nfunction rgbToHex(rgbArray) {\n    return `#${componentToHex(rgbArray[0])}${componentToHex(rgbArray[1])}${componentToHex(rgbArray[2])}`;\n}","import React, {useState} from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {calcImage} from \"./imgCalc\";\nimport {ColorPicker} from \"./ColorPicker\";\n\nexport const PicRatioFill = ({src, width, height, style, onChangeColors}) => {\n\n    const classes = useStyle({\n        containerWidth: width,\n        containerHeight: height\n    });\n    const [selectedFill, setSelectedFill] = useState(0);\n\n    const [colorCalc, setColorCalc] = useState({\n        willFitWidth: true,\n        colorRgb: {color:[0,0,0], pallet: [], main: [0,0,0]},\n        colorRgbOpposite:{color:[0,0,0], pallet: [], main: [0,0,0]}\n    });\n    const {willFitWidth, colorRgb, colorRgbOpposite} = colorCalc;\n\n    const colorRgbValue = `rgb(${colorRgb.color[0]},${colorRgb.color[1]}, ${colorRgb.color[2]})`;\n    const colorRgbOppositeValue = `rgb(${colorRgbOpposite.color[0]},${colorRgbOpposite.color[1]}, ${colorRgbOpposite.color[2]})`;\n\n    return (\n        <div className={classes.editContainer}>\n        <div\n            style={style}\n            className={willFitWidth ?\n                classes.imageContainerWidthFit :\n                classes.imageContainerHeightFit\n                }\n        >\n            <div\n                className={willFitWidth ? classes.picBorderWidth : classes.picBorderHeight}\n                style={{backgroundColor: colorRgbValue}}\n                onClick={() => setSelectedFill(1)}\n            />\n\n            <div\n                className={willFitWidth ? classes.fitWidth : classes.fitHeight}\n            >\n            <img\n                src={src}\n                className={willFitWidth ? classes.fitWidth : classes.fitHeight}\n                onLoad={(event) => {\n                    calcImage(event.target, width, height).then(\n                        (result) => {\n                            console.log(result);\n                            setColorCalc(result);\n                            if(onChangeColors)\n                                onChangeColors({\n                                    colorRgb: result.colorRgb.color,\n                                    colorRgbOpposite: result.colorRgbOpposite.color,\n                                    willFitWidth: result.willFitWidth\n                                })\n                        }\n                    );\n                }}\n            />\n            </div>\n\n            <div\n                className={willFitWidth ? classes.picBorderWidth : classes.picBorderHeight}\n                style={{backgroundColor: colorRgbOppositeValue}}\n                onClick={() => setSelectedFill(2)}\n            />\n        </div>\n            {selectedFill === 1 &&\n            <div className={classes.pickerContainer}>\n                <ColorPicker\n                    activeColor={colorRgb.color}\n                    main={colorRgb.main}\n                    pallet={colorRgb.pallet}\n                    onColorChange={(color) => {\n                        const newColor = {...colorRgb, color};\n                        const newCalc = {...colorCalc};\n                        newCalc.colorRgb = newColor;\n                        setColorCalc(newCalc);\n                        if(onChangeColors)\n                            onChangeColors({\n                                colorRgb: newCalc.colorRgb.color,\n                                colorRgbOpposite: newCalc.colorRgbOpposite.color,\n                                willFitWidth: newCalc.willFitWidth\n                            })\n                    }}\n                    onClose={()=> setSelectedFill(0)}\n                />\n            </div>\n            }\n            {selectedFill === 2 &&\n            <div className={classes.pickerContainer}>\n                <ColorPicker\n                    activeColor={colorRgbOpposite.color}\n                    main={colorRgbOpposite.main}\n                    pallet={colorRgbOpposite.pallet}\n                    onColorChange={(color) => {\n                        const newColor = {...colorRgbOpposite, color};\n                        const newCalc = {...colorCalc};\n                        newCalc.colorRgbOpposite = newColor;\n                        setColorCalc(newCalc);\n                        if(onChangeColors)\n                            onChangeColors({\n                                colorRgb: newCalc.colorRgb.color,\n                                colorRgbOpposite: newCalc.colorRgbOpposite.color,\n                                willFitWidth: newCalc.willFitWidth\n                            })\n                    }}\n                    onClose={()=> setSelectedFill(0)}\n                />\n            </div>\n            }\n        </div>\n    )\n};\n\nconst useStyle = makeStyles({\n    picBorderHeight: {\n        width: \"50%\",\n        height: props => props.containerHeight,\n        zIndex: 1,\n        cursor: \"pointer\"\n    },\n    picBorderWidth: {\n        width: \"100%\",\n        height: \"50%\",\n        zIndex: 1,\n        cursor: \"pointer\"\n    },\n    imageContainerHeightFit : {\n        width: props => props.containerWidth,\n        height: props => props.containerHeight,\n        overflow: \"hidden\",\n        backgroundColor: \"#afcdee\",\n        display:\"flex\"\n    },\n    imageContainerWidthFit : {\n        width: props => props.containerWidth,\n        height: props => props.containerHeight,\n        overflow: \"hidden\",\n        backgroundColor: \"#afcdee\"\n    },\n    fitHeight: {\n        height: \"100%\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        position: \"relative\",\n        zIndex: 2\n    },\n    fitWidth: {\n        width: \"inherit\",\n        position: \"absolute\",\n        transform: \"translateY(-50%)\",\n        zIndex: 2\n    },\n    editContainer: {\n        display: \"flex\"\n    },\n    pickerContainer: {\n        marginLeft: 30\n    }\n});","import React from \"react\";\nimport {PicRatioFill} from \"./picRatioFill/PicRatioFill\";\nexport {PicRatioFill};\n\nexport const PicRatioExample = ()=> {\n    const onChange = (results) => console.log(results);\n    return (\n        <div style={{margin: 30}}>\n            <h1>Pic Ratio Fill</h1>\n            <p>Example : Fit to width</p>\n            <PicRatioFill\n                src=\"sample.jpg\"\n                width={330}\n                height={260}\n                style={{marginBottom: 20}}\n                onChangeColors={onChange}\n            />\n            <p>Example : Fit to Height</p>\n            <PicRatioFill\n                src=\"sample2.jpg\"\n                width={330}\n                height={260}\n                onChangeColors={onChange}\n            />\n\n        </div>\n    )\n};","import './index.css'\nimport React from 'react'\nimport {render} from 'react-dom'\nimport {PicRatioExample} from \"./pic-ratio-fill\";\n\nrender(<PicRatioExample />, document.querySelector('#app'));\n\n"],"sourceRoot":""}